<h2 class="ms-1 mt-4"> Enter Question </h2>
<%= form_for @question do |f| -%>
    <div class="mb-3">
        <label> Question </label>
        <%= f.text_field :QuestionText, class: 'form-control'%>
    </div>

    <div class="mb-3">
        <label> The Actual Answer </label>
        <%= f.text_field :QuestionAnswer, class: 'form-control'%>
    </div>


    <%= f.submit "Create Question", class: "btn btn-primary" %>
<% end -%>
<br/>
<h2 class="ms-1">Display all Questions in current Quiz:</h2>
<% if !@questions.blank? %>
  <% questionNumber = 1%>
  <ul>
    <% @questions.each do |question| %>
      <li>
        <h6 class="mt-4">
          Question: <%= questionNumber %> | 
          Question Text: <%= question.QuestionText %> | 
          Question Answer: <%= question.QuestionAnswer %>
        </h6>
        
        <%= link_to "Delete Question", question, method: :delete, data: { confirm: "Are you sure you want to delete this question?" }, class: "btn btn-warning" %>
        <%questionNumber+=1%>
      </li>
    <% end %>
  </ul>
<% else %>
  <h6 class="ms-1">No data found in the table</h6>
<% end %>

<div class="mt-4">
<div class="mb-4">

</div>
</div>
<h1>STUDENT GRADES</h1>
<% if !@studnets.blank? %>
  <% @studnets.each do |student| %>
    <% total = Float(0) %>
    <% if !@answers.blank? %>
      <% @answers.each do |answer| %>
        <% if answer.student.id == student.id%>
          <% if answer.question.QuestionAnswer == answer.response%>
              <% total += 1%>
          <% end %>
        <% end %>
      <% end %>
      <h6> <%= student.username %>'s Grade: <%= ((total / @questionCount)*100).round(2) %>%</h6>
    <% end %>
  <% end %>
<% end %>


<%= link_to 'Log Out', teacher_login_url,  class: "btn btn-danger"%>