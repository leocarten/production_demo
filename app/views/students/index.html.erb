<% if flash[:notice] %>
<div class="mt-5">
  <div class="alert alert-success"><%= flash[:notice] %>
  </div>
</div>
<% end %>


<% if !@questions.blank? %>
  <%= form_with(model: @answer, url: answers_path, method: :post) do |form| %>
    <h2 class="ms-1 mt-4">Enter answers for questions:</h2>
    
    <% @questions.each do |question| %>
      <%= fields_for "answers[]", Answer.new do |answer_fields| %>
        <%= answer_fields.hidden_field :student_id, value: session[:user_id] %>
        <%= answer_fields.hidden_field :question_id, value: question.id %>
        
        <div class="mb-4">
          <h6 class="ms-1">Question <%= question.id %>: <%= question.QuestionText %></h6>
          <label class="ms-1">Answer to the question</label>
          <div class="ms-1">
          <%= answer_fields.text_field :response, class: 'form-control', placeholder: 'Enter answer' %>
          </div>
        </div>
      <% end %>
    <% end %>
    <div class="ms-1">
    <%= form.submit "Submit All Answers", class: "btn btn-primary" %>
    </div>
  <% end %>

<% else %>
  <div class="mt-4">
        <h4>Your teacher currently has no assigned questions to answer.</h4>
  </div>
<% end %>

<div class="ms-1">
<div class="mt-4">
<div class="mb-4">
<%= link_to 'Log Out', root_path,  class: "btn btn-danger"%>
</div>
</div>
</div>
